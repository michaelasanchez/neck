
$diagram-string-border: 2px solid black;

$diagram-fret-border: 1px solid rgb(100, 100, 100); //rgb(200, 200, 200);

$diagram-fret-height: 30px;

$diagram-fret-width: 25px;

$diagram-symbol-border-color: black;
$diagram-symbol-border-width: 3px;

$diagram-mute-border: $diagram-symbol-border-width solid $diagram-symbol-border-color;
$diagram-mute-diameter: 20px;

$diagram-dot-background-color: rgba(0, 0, 0, .7);
$diagram-dot-border: $diagram-symbol-border-width solid $diagram-symbol-border-color;
$diagram-dot-diameter: 16px;

.diagram {
  display: flex;

  > span {
    padding-top: $diagram-fret-height;
    line-height: $diagram-fret-height;
    padding-right: .4em;
  }

  > .string {

    .fret{
      border-bottom: $diagram-fret-border;
      height: $diagram-fret-height;
      width: $diagram-fret-width;

      display: flex;
      align-items: center;
      justify-content: center;

      position: relative;

      &:first-child {
        border-top: $diagram-fret-border;
      }

      .symbol {
        position: absolute;


        &.string {
          border-left: $diagram-string-border;
          height: 100%;
          left: 50%;

        }

        &.mute {
          position: relative;

          &::before,
          &::after {
            content: '';
            display: block;
            border: $diagram-mute-border;
            height: $diagram-mute-diameter;
            position: absolute;
          }

          &::before {
            transform: translate(-50%, -50%) rotate(45deg);
          }

          &::after {
            transform: translate(-50%, -50%) rotate(-45deg);
          }
        }

        &.dot { 
          background: $diagram-dot-background-color;
          border: $diagram-dot-border;

          height: $diagram-dot-diameter;
          width: $diagram-dot-diameter;
          border-radius: $diagram-dot-diameter / 2;

          &.root {
            border-radius: $diagram-dot-diameter / 3;
            transform: rotate(45deg);
          }
        }
      }

      &.open {
        border-top: none;
        border-bottom-color: black;
        border-bottom-width: 3px;

        .symbol {
          &.dot {
            background: none;
            // background: rgba($diagram-dot-background-color, .5);
          }
        }
      }
    }

    &:first-of-type {
      .fret:not(.open) {
        border-left: $diagram-fret-border;
      }
    }
    
    &:last-of-type {
      .fret:not(.open) {
        border-right: $diagram-fret-border;
      }
    }
  }


  &.md {
    > span {
      padding-top: $diagram-fret-height / 2;
      line-height: $diagram-fret-height / 2;
      font-size: .7rem;
    }

    > .string .fret {
      height: $diagram-fret-height / 2;
      width: $diagram-fret-width / 2;

      .symbol {

        &.dot {
          height: 10px;
          width: 10px;
          border-width: 1.5px;
        }

        &.mute {
          &::before,
          &::after {
            border-width: 2px;
            height: 12px;
          }
        }
      }
    }
  }

  &.sm {
    > span {
      padding-top: $diagram-fret-height / 3;
      line-height: $diagram-fret-height / 3;
      font-size: .6rem;
    }

    > .string .fret {
      height: $diagram-fret-height / 3;
      width: $diagram-fret-width / 3;

      .symbol {
        border-left-width: 1px;

        &.dot {
          height: 6px;
          width: 6px;
          border-width: 1px;
        }

        &.mute {
          &::before,
          &::after {
            border-width: 1px;
            height: 8px;
          }
        }
      }

      &.open {
        border-bottom-width: 2px;
      }
    }
  }
}